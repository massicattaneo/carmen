<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=0.8, user-scalable=0">
	<link rel="icon" href="images/logo.ico">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/3.6.5/firebase.js"></script>
    <script src="../bower_components/corejs/dist/corejs.js"></script>
    <script src="../bower_components/jsPDF/dist/jspdf.debug.js"></script>
    <title>IN & OUT</title>
    <style>
        #website {
            min-width: 930px;
            margin: 0 auto;
            width: 930px;
        }
        body {
            font-family: Arial;
            background: url("images/bg/1.jpg");
        }
        body.loading {
            background: #000;
        }
		::-webkit-scrollbar {
			width: 12px;
		}
		::-webkit-scrollbar-track {
			border-radius: 10px;
			-webkit-box-shadow: inset 0 0 6px rgba(82, 174, 27, 0.5);
		}
		::-webkit-scrollbar-thumb {
			border-radius: 10px;
			background: rgba(82, 174, 27, 0.5);
		}
		fieldset {
			background-color: rgba(82, 174, 27, 0.1);
			border-radius: 20px;
		}
		fieldset legend {
			display: none;
		}
		:focus {
			outline:none;
		}
    </style>
</head>
<body class="loading">
<div id="website">
    <div id="header"></div>
    <div id="page"></div>
</div>
<script>
	var webSocket = new WebSocket('ws://127.0.0.1:8081');
	var webSocketPromise = cjs.Need();
	webSocket.onopen = function(){
		webSocketPromise.resolve();
	};


    cjs.Need([
    	cjs.navigator.import('../server/data.json'),
    	webSocketPromise
	]).done(function (json) {
        //var db = cjs.Db.staticJSONAdapter(JSON);
		const require = window.require || undefined;
		var electron = (require !== undefined) ? require('electron') : {};
        var db = cjs.Db.firebaseAdapter();
        db.init({
            apiKey: "AIzaSyC8aJIXp0QBbzLsCethcKEdNmJrPEaNhoU",
            authDomain: "inandout-76471.firebaseapp.com",
            databaseURL: "https://inandout-76471.firebaseio.com",
            storageBucket: "inandout-76471.appspot.com",
            messagingSenderId: "927198449105"
        });
        cjs.Component.injectDatabaseProxy(db);
		var password = require ? electron.remote.getCurrentWindow().getPassword() : 'inandout11';
		db.login("info@inandoutbelleza.com", password)
                .done(function () {
                    cjs.navigator
                            .import('js/bootstrap.js')
                            .done(function (bootstrap) {
                                bootstrap(db, webSocket);

                            });
                }).fail(function () {
            alert('Falta la conexion a Internet!')
        });

	});


</script>
</body>
</html>
